{% extends "base.html" %}

{% block title %}Resultados de Búsqueda - {{ app_name }}{% endblock %}

{% block content %}
    <h1>Resultados de Búsqueda</h1>

    {% if books %}
        <p>Se encontraron {{ books.count }} libro(s) que coinciden con "{{ request.GET.q }}":</p>
        <div class="book-grid">
            {% for book in books %}
                <div class="book-item">
                    <img src="{{ book.image_url|default:'https://placehold.co/200x280?text=Sin+Imagen' }}"
                         alt="Portada de {{ book.title }}"
                         onerror="this.onerror=null;this.src='https://placehold.co/200x280?text=Sin+Imagen';">
                    <h3>{{ book.title }}</h3>
                    <p><strong>Autor:</strong> {{ book.authors }}</p>
                    <p><strong>Género:</strong> {{ book.genre }}</p>
                    {% if book.publication_date %}
                        <p><strong>Año:</strong> {{ book.publication_date }}</p>
                    {% endif %}
                    <div class="book-detail">
                        <details>
                            <summary>Ver Descripción</summary>
                            <p>{{ book.description|default:"No hay descripción disponible" }}</p>
                        </details>
                    </div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <p>No se encontraron libros que coincidan con "{{ request.GET.q }}".</p>
    {% endif %}
    <p><a href="{% url 'book_list' %}">Ver todos los libros</a></p>
{% endblock %}